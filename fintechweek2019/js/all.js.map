{"version":3,"sources":["all.js","main.js"],"names":["overlay","document","getElementById","video","addEventListener","show","currentTime","style","visibility","$","keydown","e","setTimeout","which","append","text","val","width","ready","modal","scrollControls","modalClose","area","form1","submitBtn","isSubscriptionEmail","openAccount","noNeed","products","code","msgDesc","msgContact","$root","inputs","click","tag","attr","animate","scrollTop","offset","top","tagName","length","hide","change","codeOpt","find","data","is","prop","placeholder","preventDefault","crm","CRM","formData","map","serializeArray","n","i","campaign","checked","push","id","trim","name","alert","phone","isPhoneNo","email","isEmail","crmData","Subject","Campaign","PromotionArea","LanguageSelect","CRMType","IsSubscriptionEmail","OpenAccount","Number","Email","Name","Phone","Source","Remark1","join","Medium","decodeURIComponent","getUrlParam","submit","crmResult","message","showModal","productRegister","prodResult","indexOf","fadeIn","callback","productAPI","url","Mustache","render","getJSON","json"],"mappings":"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","file":"all.js","sourcesContent":["// video overlay\n\nvar overlay = document.getElementById('overlay');\nvar video = document.getElementById('v');\nvideo.addEventListener('progress', function () {\n    var show = video.currentTime >= 5 && video.currentTime < 10;\n    overlay.style.visibility = show ? 'visible' : 'visible';\n}, false);\n\n// form\n\n\n$(\"body\").keydown(function (e) {\n    setTimeout(function () {\n        if (e.which == 32) {\n            $(\"#clone\").append(\"&nbsp;\");\n        }\n        $(\"#clone\").text($('input').val());\n        $('input').width($(\"#clone\").width() + 40);\n    }, 100);\n});\n","$(document).ready(function () {\r\n    var modal = $('.modal');\r\n    var scrollControls = $('#goUp, #goDown');\r\n    var modalClose = $('.close-btn, .delete-btn');\r\n    var area = $('#area');\r\n    var form1 = $(\"#form1\");\r\n    var submitBtn = $(\"#submitBtn\");\r\n    var isSubscriptionEmail = $(\"#isSubscriptionEmail\");\r\n    var openAccount = $(\"#openAccount\");\r\n    var noNeed = $(\"#noNeed\");\r\n    var products = $(\"#API, #eFX, #EDM, #eTreasury\");\r\n    var code = $('#code');\r\n    var msgDesc = $(\"#msgDesc\");\r\n    var msgContact = $(\"#msgContact\");\r\n    var scrollControls = $('a[data-link=\"prodlinks\"], div[data-link=\"prodlinks\"]');\r\n    var $root = $('html, body');\r\n    var inputs = $(\"input:text\")\r\n\r\n    /* scroll */\r\n    scrollControls.click(function () {\r\n        var tag = $.attr(this, 'href');\r\n        $root.animate({\r\n            scrollTop: tag == \"#pageHead\" ? 0 : $(tag).offset().top-80\r\n        }, 850);\r\n        if (this.tagName == \"A\" && $(\".navbar-collapse.navbar-right.collapse.in\").length > 0) {\r\n            $('#myNavbarBtn').click();\r\n        }\r\n        return false;\r\n    });\r\n\r\n    //$root.animate({scrollTop:0});\r\n    $('html, body').animate({\r\n\t\tscrollTop: 0\r\n\t}, 0);\r\n\r\n    /* modal */\r\n    modalClose.click(function () {\r\n        modal.hide();\r\n    });\r\n\r\n    /* area code*/\r\n    area.change(function (e) {\r\n        var codeOpt = $(this).find(':selected').data('code');\r\n        code.val(codeOpt);\r\n    });\r\n\r\n    /* noNeed check */\r\n    noNeed.change(function() {\r\n        if (!$(this).is(\":checked\")) {\r\n            products.prop('checked', true);\r\n        }\r\n    })\r\n\r\n    products.change(function() {\r\n        if (!$(this).is(\":checked\") && !noNeed.is(\":checked\")) {\r\n            noNeed.prop('checked', true);\r\n        };\r\n    })\r\n\r\n    /* ie9 place holder*/\r\n    inputs.placeholder();\r\n\r\n    submitBtn.click(function(e) {\r\n        e.preventDefault();\r\n\r\n        var crm = new CRM();\r\n        var formData = {};\r\n        $.map(form1.serializeArray(), function (n, i) {\r\n            formData[n['name']] = n['value'];\r\n        });\r\n        formData.isSubscriptionEmail = !isSubscriptionEmail.is(\":checked\");\r\n        formData.openAccount = openAccount.val();\r\n        formData.campaign = 10;\r\n\r\n        formData.products = [];\r\n        for (var i = 0; i < products.length; i++) {\r\n            if (!products[i].checked)\r\n                formData.products.push(products[i].id);\r\n        }\r\n\r\n        if ($.trim(formData.name) == \"\") {\r\n            alert(\"您的姓名，尚未填寫！\");\r\n            return;\r\n        }\r\n\r\n        if ($.trim(formData.phone) == \"\") {\r\n            alert(\"您的電話，尚未填寫！\");\r\n            return;\r\n        }else if (!crm.isPhoneNo(formData.phone)) {\r\n            alert(\"您的電話不正確！\");\r\n            return;\r\n        }\r\n\r\n        if ($.trim(formData.email) == \"\") {\r\n            alert(\"您的電郵，尚未填寫！\");\r\n            return;\r\n        }else if (!crm.isEmail(formData.email)) {\r\n            alert(\"您的電郵格式不正確！\");\r\n            return;\r\n        }\r\n\r\n        if (formData.products.length == 0 && noNeed.is(\":checked\")) {\r\n            alert(\"您想體驗的功能，尚未填寫！\");\r\n            return;\r\n        }\r\n\r\n        if ($.trim(formData.openAccount) == \"\") {\r\n            alert(\"您是否預約開戶，尚未填寫！\");\r\n            return;\r\n        }\r\n\r\n        var crmData = {\r\n            Subject: 10,\r\n            Campaign: 10,\r\n            PromotionArea: 6,\r\n            LanguageSelect: 2,\r\n            CRMType: 2,\r\n            IsSubscriptionEmail: formData.isSubscriptionEmail ? 1 : 0,\r\n            OpenAccount: Number(formData.openAccount),\r\n            Email: formData.email,\r\n            Name: formData.name,\r\n            Phone: formData.code + formData.phone,\r\n            Source: 3,\r\n            Remark1: formData.products.join(),\r\n            Medium: decodeURIComponent(crm.getUrlParam()[\"Medium\"])\r\n        };\r\n\r\n        crm.submit(crmData, function(crmResult) {\r\n            if (crmResult.code !== \"0\") {\r\n                alert(crmResult.message);\r\n                return;\r\n            }\r\n\r\n            if (formData.products.length == 0) {\r\n                showModal(formData);\r\n                return;\r\n            }\r\n\r\n            productRegister(formData, function (prodResult) {\r\n                if (prodResult.code === \"0\") {\r\n                    showModal(formData)\r\n                } else {\r\n                    alert(prodResult.message);\r\n                }});\r\n            });\r\n        });\r\n\r\n        function showModal(formData) {\r\n            msgContact.text(formData.openAccount == \"1\" ?　\"我們的客戶經理會在第一時間與您聯繫。\": \"\");\r\n\r\n            if (formData.products.indexOf('eFX') != -1 || formData.products.indexOf('EDM') != -1 || formData.products.indexOf('eTreasury') != -1) {\r\n                msgDesc.text((formData.openAccount == \"1\" ? \"此外，\": \"\") + \"您將通過郵件收到模擬賬戶登錄信息及系統使用說明。若遇到任何問題，也可隨時與我們聯繫。\")\r\n            }\r\n            modal.fadeIn();\r\n        }\r\n\r\n        function productRegister(data, callback) {\r\n            var productAPI = \"https://testapi.kvbgc.com/api/GCCRM/ProductExperience?\" +\r\n                \"Name={{name}}&\" +\r\n                \"Area={{area}}&\" +\r\n                \"Phone={{code}}{{phone}}&\" +\r\n                \"Email={{email}}&\" +\r\n                \"Campaign={{campaign}}&\" +\r\n                \"ProductList={{products}}&\" +\r\n                \"callback=?\";\r\n\r\n            var url = Mustache.render(productAPI, data);\r\n            $.getJSON(url, function (json) {\r\n                callback(json)\r\n            });\r\n        }\r\n});"]}